<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Combines Biological and Environmental Data to Produce a GDM-formatted
Site-Pair Table — formatsitepair • gdm</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Combines Biological and Environmental Data to Produce a GDM-formatted
Site-Pair Table — formatsitepair" />
<meta property="og:description" content="This function takes input biological data and environmental,
geographic, and other predictor data and builds a site-pair table required
for fitting a Generalized Dissimilarity Model using the gdm
function. NOTE: x-y coordinates of sites MUST be present in either the
biological or the environmental data. Site coordinates ideally should be in a
projected coordinate system (i.e., not longitude-latitude) to ensure proper
calculation of geographic distances. 
The input biological data can be in one of the following four formats. Note
that the general term &quot;species&quot; is used, but any classification of biological
entities (e.g. functional types, haplotypes, etc) can be used as long as an
appropriate distance metric is also supplied (see &quot;dist&quot; argument): 

site-by-species matrix 
x, y, species list 
site-by-site biological distance (dissimilarity) matrix 
an existing site-pair table (see Details) 


Predictor data can be provided in three formats: 

a site-by-predictor matrix with a column for each predictor variable
and a row for each site 
a raster stack, with one raster for each predictor variable 
one or more site-by-site distance matrices using the &quot;distPreds&quot;
argument (see below).

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gdm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.0-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fitzLab-AL/gdm/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combines Biological and Environmental Data to Produce a GDM-formatted
Site-Pair Table</h1>
    <small class="dont-index">Source: <a href='https://github.com/fitzLab-AL/gdm/blob/master/R/gdm.formatsitepair.R'><code>R/gdm.formatsitepair.R</code></a></small>
    <div class="hidden name"><code>formatsitepair.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes input biological data and environmental,
geographic, and other predictor data and builds a site-pair table required
for fitting a Generalized Dissimilarity Model using the <code><a href='gdm.html'>gdm</a></code>
function. NOTE: x-y coordinates of sites MUST be present in either the
biological or the environmental data. Site coordinates ideally should be in a
projected coordinate system (i.e., not longitude-latitude) to ensure proper
calculation of geographic distances. <br /></p>
<p>The input biological data can be in one of the following four formats. Note
that the general term "species" is used, but any classification of biological
entities (e.g. functional types, haplotypes, etc) can be used as long as an
appropriate distance metric is also supplied (see "dist" argument): <br /></p>
<ol>
<li><p>site-by-species matrix <br /></p></li>
<li><p>x, y, species list <br /></p></li>
<li><p>site-by-site biological distance (dissimilarity) matrix <br /></p></li>
<li><p>an existing site-pair table (see Details) <br /></p></li>
</ol>

<p>Predictor data can be provided in three formats: <br /></p>
<ol>
<li><p>a site-by-predictor matrix with a column for each predictor variable
and a row for each site <br /></p></li>
<li><p>a raster stack, with one raster for each predictor variable <br /></p></li>
<li><p>one or more site-by-site distance matrices using the "distPreds"
argument (see below).</p></li>
</ol>

    </div>

    <pre class="usage"><span class='fu'>formatsitepair</span><span class='op'>(</span><span class='va'>bioData</span>, <span class='va'>bioFormat</span>, dist<span class='op'>=</span><span class='st'>"bray"</span>, abundance<span class='op'>=</span><span class='cn'>FALSE</span>, siteColumn<span class='op'>=</span><span class='cn'>NULL</span>,
<span class='va'>XColumn</span>, <span class='va'>YColumn</span>, sppColumn<span class='op'>=</span><span class='cn'>NULL</span>, abundColumn<span class='op'>=</span><span class='cn'>NULL</span>, sppFilter<span class='op'>=</span><span class='fl'>0</span>, <span class='va'>predData</span>,
distPreds<span class='op'>=</span><span class='cn'>NULL</span>, weightType<span class='op'>=</span><span class='st'>"equal"</span>, custWeights<span class='op'>=</span><span class='cn'>NULL</span>, sampleSites<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>bioData</th>
      <td><p>The input biological (the response variable) data table, in
one of the four formats defined above (see Details).</p></td>
    </tr>
    <tr>
      <th>bioFormat</th>
      <td><p>An integer code specifying the format of bioData. Acceptable
values are 1, 2, 3, or 4 (see Details).</p></td>
    </tr>
    <tr>
      <th>dist</th>
      <td><p>Default = "bray". A character code indicating the metric to
quantify pairwise site distances / dissimilarities. Calls the
<code><a href='https://rdrr.io/pkg/vegan/man/vegdist.html'>vegdist</a></code> function from the <span class="pkg">vegan</span> package to
calculate dissimilarity and therefore accepts any method available from
<code><a href='https://rdrr.io/pkg/vegan/man/vegdist.html'>vegdist</a></code>.</p></td>
    </tr>
    <tr>
      <th>abundance</th>
      <td><p>Default = FALSE. Indicates whether the biological data are
abundance data (TRUE) or presence-absence (0, 1) data (FALSE).</p></td>
    </tr>
    <tr>
      <th>siteColumn</th>
      <td><p>The name of the column in either the biological or
environmental data table containing a unique site identifier. If a site column
is provided in both the biological and environmental data, the site column name
must be the same in both tables.</p></td>
    </tr>
    <tr>
      <th>XColumn</th>
      <td><p>The name of the column containing x-coordinates of sites.
X-coordinates can be provided in either the biological or environmental data
tables, but MUST be in at least one of them. If an x-coordinate column is
provided in both the biological and environmental data, the column name must
be identical. Site coordinates ideally should be in a projected coordinate
system (i.e., not longitude-latitude) to ensure proper calculation of
geographic distances. Note that if you are using rasters, they must be in the
same coordinate system as the site coordinates.</p></td>
    </tr>
    <tr>
      <th>YColumn</th>
      <td><p>The name of the column containing y-coordinates of sample sites.
Y-coordinates can be provided in either the biological or environmental data
tables, but MUST be in at least one of them. If a y-coordinate column is
provided in both the biological and environmental data, the column name must
be identical. Site coordinates ideally should be in a projected coordinate
system (i.e., not longitude-latitude) to ensure proper calculation of
geographic distances. Note that if you are using rasters, they must be in the
same coordinate system as the site coordinates.</p></td>
    </tr>
    <tr>
      <th>sppColumn</th>
      <td><p>Only used if bioFormat = 2 (x, y, species list). The name of
the column containing unique name / identifier for each species.</p></td>
    </tr>
    <tr>
      <th>abundColumn</th>
      <td><p>If abundance = TRUE, this parameter identifies the column
containing the measure of abundance at each site. Only used if bioFormat = 2
(i.e., x, y, species list), though in the case of abundance data, the table
would have four columns: x, y, species, abundance.</p></td>
    </tr>
    <tr>
      <th>sppFilter</th>
      <td><p>Default = 0. To account for limited sampling effort at some
sites, sppFilter removes all sites at which the number of recorded species
(i.e., observed species richness) is less than the specified value. For
example, if sppFilter = 5, all sites with fewer than 5 recorded species
will be removed.</p></td>
    </tr>
    <tr>
      <th>predData</th>
      <td><p>The environmental predictor data. Accepts either a
site-by-predictor table or a raster stack.</p></td>
    </tr>
    <tr>
      <th>distPreds</th>
      <td><p>An optional list of distance matrices to be used as predictors
in combination with predData. For example, a site-by-site dissimilarity matrix
for one biological group (e.g., trees) can be used as a predictor for another
group (e.g., ferns). Each distance matrix must have as the first column the
names of the sites (therefore the matrix will not be square). The name of the
column containing the site names should have the same name as that provided
for the siteColumn argument. Site IDs are required here to ensure correct ordering
of sites in the construction of the site-pair table. Note that the formatsitepair
function will not accept only distances matrices as predictors
(i.e., at least one predictor variable is required). If you wish to fit GDM
using only distance matrices, provide one fake predictor (e.g., with all sites
have the same value), plus site and coordinate columns if needed. The s1 and
s2 columns for this variable can then be removed by hand before fitting the GDM.</p></td>
    </tr>
    <tr>
      <th>weightType</th>
      <td><p>Default = "equal". Defines the weighting for sites. Can be
either: (1) "equal" (weights for all sites set = 1), (2) "richness" (each
site weighted according to number of species recorded), or (3) "custom"
(user defined). If weightType="custom", the user must provide a vector of
site weights equal to the number of rows in the full site-pair table (i.e.,
before species filtering (sppFilter argument) or sub-sampling is taken into
account (sampleSites argument)).</p></td>
    </tr>
    <tr>
      <th>custWeights</th>
      <td><p>A two column matrix or data frame of user-defined site
weights. The first column should be the site name and should be named the same
as that provided for the siteColumn argument. The second column should be numeric
weight values and should be named "weights". The weight values represent the
importance of each site in model fitting, and the values in the output
site-pair table is an average of the two sites in each site-pair. Required
when weightType = "custom". Ignored otherwise.</p></td>
    </tr>
    <tr>
      <th>sampleSites</th>
      <td><p>Default = 1. A number between 0-1 indicating the fraction
of sites to be used to construct the site-pair table. This argument can be
used to reduce the number of sites to overcome possible memory limitations
when fitting models with very large numbers of sites.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A formatted site-pair table containing the response (biological
distance or dissimilarity), predictors, and weights as required for fitting
Generalized Dissimilarity Models.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>bioData and bioFormat:
The function accepts biological data in the following formats:</p>
<p>bioData = site-by-species matrix; bioFormat = 1: assumes that the response
data are provided with a site ID column (specified by siteCol) and, optionally,
two columns for the x &amp; y coordinates of the sites. All remaining columns
contain the biological data, with a column for each biological entity (most
commonly species). In the case that a raster stack is provided for the
environmental data (predData), x-y coordinates MUST be provided in bioData
to allow extraction of the environmental data at site locations. The x-y
coordinates will be intersected with the raster stack and, if the number of
unique cells intersected by the points is less than the number of unique site
IDs (i.e. multiple sites fall within a single cell), the function will use
the raster cell as the site ID and aggregate sites accordingly. Therefore,
model fitting will be sensitive to raster cell size. If the environmental
data are in tabular format, they should have the same number of sites
(i.e., same number of rows) as bioData. The x-y coordinate and site ID
columns must have the same names in bioData and predData.</p>
<p>bioData = x, y, species list (optionally a fourth column with abundance can
be provided); bioFormat = 2: assumes a table of 3 or 4 columns, the first two
being the x &amp; y coordinates of species records, the third (sppCol) being the
name / identifier of the species observed at that location, and optionally a
fourth column indicating a measure of abundance.  If an abundance column is
not provided, presence-only data are assumed. In the case that a raster stack
is provided for the environmental data (predData), the x-y coordinates will
be intersected with the raster stack and, if the number of unique cells
intersected by the points is less than the number of unique site IDs
(i.e. multiple sites fall within a single cell), the function will use the
raster cell as the site ID and aggregate sites accordingly. Therefore, model
fitting will be sensitive to raster cell size.</p>
<p>bioData = site-pair table; bioFormat = 4: with an already created site-pair
table, this option allows the user to add one or more distance matrices (see
distPreds above) to the existing site-pair table and/or sub-sample the
site-pair table (see sample above). If the site-pair table was not created
using the formatsitepair function, the user will need to ensure the order of
the sites matches that in other tables being provided to the function.</p>
<p>NOTES: (1) The function assumes that the x-y coordinates and the raster stack
(if used) are in the same coordinate system. No checking is performed to
confirm this is the case. (2) The function assumes that the association between
the provided site and x-y coordinate columns are singular and unique.
Therefore, the function will fail should a given site has more than one sets of
coordinates associated with it, as well as multiple sites being given the
exact same coordinates.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'>## tabular data</span></span>
<span class='r-in'><span class='co'># start with the southwest data table</span></span>
<span class='r-in'> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>southwest</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   species site    awcA  phTotal   sandA     shcA solumDepth     bio5     bio6</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1    spp1 1066 14.4725 546.1800 71.3250 178.8650   875.1725 31.43824 5.058823</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2    spp1 1026 16.2575 470.9950 68.8975 105.8400   928.4925 33.14412 4.852941</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3    spp1 1025 23.1375 459.7425 71.4700  88.3550   892.2275 32.84000 4.817143</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4    spp1 1026 16.2575 470.9950 68.8975 105.8400   928.4925 33.14412 4.852941</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5    spp1 1027 17.0175 489.3950 74.6775 147.2125   951.9050 33.17813 4.590625</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6    spp1 1047 17.3625 515.0825 75.7525 164.1875   981.4750 32.61579 4.676316</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      bio15 bio18    bio19       Lat     Long</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1 40.38235     0 132.6471 -32.99425 118.7573</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2 48.20588     0 140.2941 -32.04285 118.3495</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3 53.88571    43 145.0571 -31.99067 117.8260</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4 48.20588     0 140.2941 -32.04285 118.3495</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5 44.00000     0 135.6875 -32.09326 118.8736</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6 42.00000     0 134.0263 -32.54354 118.8157</span>
<span class='r-in'> <span class='va'>sppData</span> <span class='op'>&lt;-</span> <span class='va'>southwest</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>13</span>,<span class='fl'>14</span><span class='op'>)</span><span class='op'>]</span></span>
<span class='r-in'> <span class='va'>envTab</span> <span class='op'>&lt;-</span> <span class='va'>southwest</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>southwest</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#########table type 1</span></span>
<span class='r-in'><span class='co'>## site-species table without coordinates</span></span>
<span class='r-in'><span class='va'>testData1a</span> <span class='op'>&lt;-</span> <span class='fu'>reshape2</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/reshape2/man/cast.html'>dcast</a></span><span class='op'>(</span><span class='va'>sppData</span>, <span class='va'>site</span><span class='op'>~</span><span class='va'>species</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Using Long as value column: use value.var to override.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Aggregation function missing: defaulting to length</span>
<span class='r-in'><span class='co'>##site-species table with coordinates</span></span>
<span class='r-in'><span class='va'>coords</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>sppData</span><span class='op'>[</span>, <span class='fl'>2</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>sppData</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>testData1b</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span><span class='op'>(</span><span class='va'>testData1a</span>, <span class='va'>coords</span>, by<span class='op'>=</span><span class='st'>"site"</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## site-species, table-table</span></span>
<span class='r-in'><span class='va'>exFormat1a</span> <span class='op'>&lt;-</span> <span class='fu'>formatsitepair</span><span class='op'>(</span><span class='va'>testData1a</span>, <span class='fl'>1</span>, siteColumn<span class='op'>=</span><span class='st'>"site"</span>, XColumn<span class='op'>=</span><span class='st'>"Long"</span>,</span>
<span class='r-in'>YColumn<span class='op'>=</span><span class='st'>"Lat"</span>, predData<span class='op'>=</span><span class='va'>envTab</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site weighting type: Equal"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site-pair table created with 4371 rows (94 unique sites) and 26 columns (10 environmental variables)."</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#' # next, let's try environmental raster data</span></span>
<span class='r-in'><span class='co'>## not run</span></span>
<span class='r-in'><span class='co'># rastFile &lt;- system.file("./extdata/swBioclims.grd", package="gdm")</span></span>
<span class='r-in'><span class='co'># envRast &lt;- stack(rastFile)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## site-species, table-raster</span></span>
<span class='r-in'><span class='co'>## not run</span></span>
<span class='r-in'><span class='co'># exFormat1b &lt;- formatsitepair(testData1b, 1, siteColumn="site", XColumn="Long",</span></span>
<span class='r-in'><span class='co'># YColumn="Lat", predData=envRast)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#########table type 2</span></span>
<span class='r-in'><span class='co'>## site xy spp list, table-table</span></span>
<span class='r-in'><span class='va'>exFormat2a</span> <span class='op'>&lt;-</span> <span class='fu'>formatsitepair</span><span class='op'>(</span><span class='va'>sppData</span>, <span class='fl'>2</span>, XColumn<span class='op'>=</span><span class='st'>"Long"</span>, YColumn<span class='op'>=</span><span class='st'>"Lat"</span>,</span>
<span class='r-in'>sppColumn<span class='op'>=</span><span class='st'>"species"</span>, siteColumn<span class='op'>=</span><span class='st'>"site"</span>, predData<span class='op'>=</span><span class='va'>envTab</span><span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>No abundance column was specified, so the species data are</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span>                 assumed to be presences.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Aggregation function missing: defaulting to length</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site weighting type: Equal"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site-pair table created with 4371 rows (94 unique sites) and 26 columns (10 environmental variables)."</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## site xy spp list, table-raster</span></span>
<span class='r-in'><span class='co'>## not run</span></span>
<span class='r-in'><span class='co'># exFormat2b &lt;- formatsitepair(sppData, 2, XColumn="Long", YColumn="Lat",</span></span>
<span class='r-in'><span class='co'># sppColumn="species", siteColumn="site", predData=envRast)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#########table type 3</span></span>
<span class='r-in'><span class='co'>## It is possible to format a site-pair table by starting</span></span>
<span class='r-in'><span class='co'># with a pre-calculated matrix of biological distances</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>gdmDissim</span><span class='op'>)</span> <span class='co'>#square pairwise distance matrix</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 94 94</span>
<span class='r-in'><span class='va'>gdmDissim</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>          V1        V2        V3        V4        V5</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1 0.0000000 0.8181818 1.0000000 0.5000000 0.7500000</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2 0.8181818 0.0000000 0.9000000 0.7777778 0.6551724</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3 1.0000000 0.9000000 0.0000000 1.0000000 0.5757576</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4 0.5000000 0.7777778 1.0000000 0.0000000 0.9090909</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5 0.7500000 0.6551724 0.5757576 0.9090909 0.0000000</span>
<span class='r-in'><span class='co'># need to add a site ID column</span></span>
<span class='r-in'><span class='va'>site</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>sppData</span><span class='op'>$</span><span class='va'>site</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>gdmDissim</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>site</span>, <span class='va'>gdmDissim</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'># now we can format the table:</span></span>
<span class='r-in'><span class='va'>exFormat3</span> <span class='op'>&lt;-</span> <span class='fu'>formatsitepair</span><span class='op'>(</span><span class='va'>gdmDissim</span>, <span class='fl'>3</span>, XColumn<span class='op'>=</span><span class='st'>"Long"</span>, YColumn<span class='op'>=</span><span class='st'>"Lat"</span>,</span>
<span class='r-in'>predData<span class='op'>=</span><span class='va'>envTab</span>, siteColumn<span class='op'>=</span><span class='st'>"site"</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site weighting type: Equal"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site-pair table created with 4371 rows (94 unique sites) and 26 columns (10 environmental variables)."</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#########table type 4</span></span>
<span class='r-in'><span class='co'>## adds a predictor matrix to an existing site-pair table, in this case,</span></span>
<span class='r-in'><span class='co'>## predData needs to be provided, but is not actually used</span></span>
<span class='r-in'><span class='va'>exFormat4</span> <span class='op'>&lt;-</span> <span class='fu'>formatsitepair</span><span class='op'>(</span><span class='va'>exFormat2a</span>, <span class='fl'>4</span>, predData<span class='op'>=</span><span class='va'>envTab</span>, siteColumn<span class='op'>=</span><span class='st'>"site"</span>,</span>
<span class='r-in'>                            distPreds<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>gdmDissim</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Site-pair table created with 4371 rows (94 unique sites) and 28 columns (11 environmental variables)."</span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matt Fitzpatrick, Karel Mokany, Glenn Manion, Diego Nieto-Lugilde, Simon Ferrier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


